[tools]
aichat = "latest"
amp = "latest"
"aqua:dlvhdr/gh-dash" = "latest"
"aqua:ip7z/7zip" = "latest"
"aqua:jorgerojas26/lazysql" = "latest"
"aqua:zk-org/zk" = "latest"
"asdf:mise-plugins/mise-eza" = "latest"
bat = "latest"
bottom = "latest"
cargo-binstall = "latest"
"cargo:findutils" = "latest"
"cargo:git-graph" = "latest"
chezmoi = "latest"
coreutils = "latest"
direnv = "latest"
dua = "latest"
duf = "latest"
dust = "latest"
fd = "latest"
fzf = "latest"
gh = "latest"
"github:gitui-org/gitui" = "latest"
glab = "latest"
hyperfine = "latest"
jq = "latest"
lazydocker = "latest"
lazygit = "latest"
neovim = "latest"
node = "latest"
pandoc = "latest"
"pipx:httpie" = "latest"
pnpm = "latest"
ripgrep = "latest"
rust = "latest"
tree-sitter = "latest"
"ubi:dalance/procs" = "latest"
"ubi:peteretelej/tree" = "latest"
upt = "latest"
usage = "latest"
uv = "latest"
yazi = "latest"
yq = "latest"
zellij = "latest"
zoxide = "latest"
atuin = "latest"
"cargo:diffutils" = "latest"
xh = "latest"
tssh = "latest"
"ubi:tstack/lnav" = "latest"
"cargo:tlrc" = "latest"
carapace = "latest"
"aqua:charmbracelet/crush" = "latest"

[plugins]
devbox = "https://github.com/jbadeau/mise-nix.git"

[settings]
experimental = true
lockfile = true
activate_aggressive = true
always_keep_download = true
idiomatic_version_file_enable_tools = []

[settings.cargo]
binstall = true

[env]
MISE_ENV = "devbox,opt"
_.file = ["~/.dotfiles.env", "~/.env", "~/.config/user-dirs.dirs"]
_.path = ["~/.local/bin/"]

PS1 = ": "
PS2 = ".. "
VISUAL = "nvim"
EDITOR = "__nvim-bare"
PAGER = "bat --plain"

# WSL2
BROWSER = "firefox.exe"
JULIA_PROJECT = "@."
TLRC_CONFIG = "{{env.HOME}}/.config/tlrc/config.toml"

[tasks.clean]
description = "Clean up system packages and caches"
depends = ["mise:clean", "nix:clean", "brew:clean"]

[tasks.self-update]
depends = ["devbox:self-update", "brew:self-update"]

[tasks.update]
description = "Update all tools and packages"
depends = [
  "chezmoi:update",
  "mise:update",
  "devbox:update",
  "yazi:update",
  "nvim:update",
  "brew:update",
  "upt:update",
]

[tasks."brew:update"]
description = "Update Homebrew global packages"
run = "command -v brew >/dev/null && brew upgrade || exit 0"

[tasks."brew:self-update"]
description = "Update Homebrew"
run = "command -v brew >/dev/null && brew update || exit 0"

[tasks."chezmoi:update"]
description = "Update Chezmoi"
run = "chezmoi upgrade"

[tasks."devbox:self-update"]
description = "Update Devbox"
run = "devbox version update"

[tasks."devbox:update"]
description = "Update Devbox global packages"
run = "devbox global update"

[tasks."upt:update"]
description = "Update system packages"
run = ["mise run upt update", "mise run upt upgrade"]

[tasks."nerd-fonts:list"]
description = "List installed Nerd Fonts"
run = "fc-list | grep Nerd"

[tasks."mise:update"]
alias = "mise:up"
description = "Update Mise global packages"
run = ["mise upgrade", "mise plugins upgrade"]

[tasks."mise:clean"]
description = "Clean Mise cache"
run = "mise prune"

[tasks."nvim:clean"]
description = "Clean Neovim plugins"
run = "nvim --headless '+Lazy! clean' +qa"

[tasks."nvim:install"]
description = "Install Neovim plugins"
alias = "nvim:i"
run = "nvim --headless '+Lazy! install' +qa"

[tasks."nvim:sync"]
description = "Sync Neovim plugins"
run = "nvim --headless '+Lazy! sync' +qa"

[tasks."nvim:update"]
description = "Update Neovim plugins"
alias = "nvim:up"
run = "nvim --headless '+Lazy! update' +qa"

[tasks."yazi:install"]
alias = "yazi:i"
description = "Install Yazi packages"
run = "ya pkg install"

[tasks."yazi:update"]
alias = "yazi:up"
description = "Update Yazi packages"
run = "ya pkg upgrade"

[tasks.random-hex]
description = "Generate a 32-bit random hex number"
alias = "rhex"
run = "openssl rand -hex 32| cut -c -7"

[tasks.zippdf]
description = "Compress PDF files in the current directory recursively"
run = "find -type f -iname '*.pdf' -exec gzip -vf {} +"
